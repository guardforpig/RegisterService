<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AdminService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">allTest 覆盖结果</a> &gt; <a href="index.source.html" class="el_package">com.middleware.server.console</a> &gt; <span class="el_source">AdminService.java</span></div><h1>AdminService.java</h1><pre class="source lang-java linenums">package com.middleware.server.console;

import com.middleware.server.common.ReturnObject;
import com.middleware.server.console.AdminDao;
import com.middleware.server.model.VO.RoleVO;
import com.middleware.server.model.VO.UserSimpleVO;
import com.github.pagehelper.PageInfo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;

import java.util.List;

@Component
@Service
<span class="fc" id="L16">public class AdminService {</span>


    @Autowired
    AdminDao adminDao;
    @Autowired
    UserDao userDao;
//------------------------------------用户部分（包含用户×角色）-----------------------------------------------------------------
    /**
     * 管理员获取所有用户
     * @param page 页码
     * @param pageSize 一页的条目数量
     * @return
     * @author GXC
     */
    public ReturnObject&lt;PageInfo&lt;UserSimpleVO&gt;&gt; getAllUser(Integer page, Integer pageSize){
<span class="fc" id="L32">        return adminDao.getAllUser(page,pageSize);</span>
    }

    /**
     * 管理员新增用户
     * @param roleNameList
     * @param creatorId
     * @return
     * @author GXC at 16:09 2021/7/18
     */
    public ReturnObject newUser(String userName,List&lt;String&gt; roleNameList, Long creatorId){
<span class="fc" id="L43">        return adminDao.newUser(userName,roleNameList,creatorId);</span>
    }
    /**
     * 管理员查询某个用户的信息
     * @param userId 用户id
     * @return
     * @author GXC at 16:09 2021/7/18
     */
    public ReturnObject getSingleUser(Long userId){
<span class="fc" id="L52">        return adminDao.getSingleUser(userId);</span>
    }
    /**
     * 逻辑删除某个用户（state=3）
     * @param userId 用户的id
     * @return
     * @author GXC at 17:39 2021/7/18
     */
    public ReturnObject banUser(Long userId){
<span class="fc" id="L61">        return adminDao.banUser(userId);</span>
    }
    /**
     * 将用户的状态在正常状态切和过渡状态进行一次切换
     * @param userId 用户id
     * @return
     * @author GXC at 23:41 2021/7/18
     */
    public ReturnObject reverseUser(Long userId){
<span class="fc" id="L70">        return adminDao.reverseUser(userId);</span>
    }
    /**
     * 管理员初始化用户密码，暂定123456
     * @param userId 用户id
     * @return
     * @author GXC at 23:41 2021/7/18
     */
    public ReturnObject resetUserPassword(Long userId) {
<span class="fc" id="L79">        return adminDao.resetUserPassword(userId);</span>
    }

    /**
     * 管理员批量修改员工角色（已有删除，未有则添加）
     * @param userId 操作目标用户ID
     * @param roleIdList 角色列表
     * @param creatorId 创建者id
     * @return
     * @author GXC at 9:32 2021/7/19
     */
    public ReturnObject modifyUserRole(Long userId, List&lt;Long&gt; roleIdList,Long creatorId) {
<span class="fc" id="L91">        return adminDao.modifyUserRole(userId,roleIdList,creatorId);</span>
    }
    //----------------------------------------角色部分---------------------------------------------------------------------------

    /**
     * 查看所有角色
     * @param page
     * @param pageSize
     * @return
     */
    public ReturnObject&lt;PageInfo&lt;RoleVO&gt;&gt; getAllRole(Integer page, Integer pageSize) {
<span class="fc" id="L102">        return adminDao.getAllRole(page,pageSize);</span>
    }
    /**
     * 管理员修改角色描述
     * @param roleId
     * @param description
     * @return
     * @Author GXC at 17:04 2021/7/19
     */
    public ReturnObject modifyRoleDescription(Long roleId, String description,Long creatorId) {
<span class="fc" id="L112">        return adminDao.modifyRoleDescription(roleId,description,creatorId);</span>
    }

    /**
     * 批量修改某角色的权限
     * @param roleId
     * @param privilegeIdList
     * @param creatorId
     * @return
     */
    public ReturnObject modifyRolePrivilege(Long roleId, List&lt;Long&gt; privilegeIdList, Long creatorId) {
<span class="fc" id="L123">        return adminDao.modifyRolePrivilege(roleId,privilegeIdList,creatorId);</span>
    }
  //-----------------------权限部分-------------------------------------------
    public ReturnObject getPrivilege() {
<span class="fc" id="L127">        return new ReturnObject(adminDao.getPrivilege());</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>